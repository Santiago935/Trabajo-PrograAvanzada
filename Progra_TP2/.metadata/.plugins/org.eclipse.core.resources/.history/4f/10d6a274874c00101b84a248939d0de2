package cofres;

import java.util.HashMap;

import utiles.Item;

public class CofreProvisionActiva extends Cofre {
	private HashMap<Item, Integer> itemsOfrecidos; //Diferentes de los que realmente tiene
	
    public CofreProvisionActiva(int x, int y, String id) {
        super(x, y, id);
    }

    public HashMap<Item, Integer> ofertaDeItems()
    {
    	return this.items;
    }
    
    
    @Override
	public boolean aceptarSolicitud(Item item, int cantidadSolicitada) {
		int cantEnStock = itemsOfrecidos.getOrDefault(item, 0);
		
		if(cantidadSolicitada > cantEnStock)
			return false;
		
		itemsOfrecidos.put(item, cantEnStock - cantidadSolicitada);
		return true;
				}


    //Pisamos el toString super y hacemos el especifico
	@Override
	public String toString() {
		return "Cofre [id=" + getId() + 
				", coordenada=" + getCoordenada() + 
				", nodo=" + getNodo() + 
				", tipo= CofreProvisionActiva" + 
				"]";
	}

	@Override
	public  int consultarStock(Item item) {
		return itemsOfrecidos.getOrDefault(item, 0);
	}
	
    public void guardarItem(Item item, int cantidad) {
        items.put(item, items.getOrDefault(item, 0) + cantidad);
    }
	
}